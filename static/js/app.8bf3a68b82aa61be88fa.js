webpackJsonp([1],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("//Fk"),a=n.n(r),s=n("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app-wall"}},[e("router-view")],1)},staticRenderFns:[]};var o,c=n("VU/8")({name:"App"},i,!1,function(t){n("eOSv")},null,null).exports,u=n("/ocq"),d=n("Xxa5"),l=n.n(d),p=n("exGp"),v=n.n(p),f=n("EFqf"),h=n.n(f),m={name:"MarkdownEditor",props:{markdownContent:{type:String,default:""},markdownId:{type:String,default:""}},data:function(){return{focusSave:!1,showCheck:!1,saving:!1,mustTriggerAutoSave:!1,firstLoad:!0,openAlert:!1,errors:[],content:"# Welcome"}},computed:{compiledMarkdown:function(){return this.preview(this.content)}},methods:{preview:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return h()(t,{sanitize:!0})},update:function(t){var e=this;return v()(l.a.mark(function n(){return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$delay(500);case 2:e.content=t.target.value;case 3:case"end":return n.stop()}},n,e)}))()},triggerAutosave:_.debounce((o=v()(l.a.mark(function t(e){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.saving=!0,t.next=4,this.$http.put(this.$currentEnv.API_URL+"/markdowns/"+this.markdownId,{content:e});case 4:this.$emit("reRenderList"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.errors.push(t.t0);case 10:this.saving=!1;case 11:case"end":return t.stop()}},t,this,[[0,7]])})),function(t){return o.apply(this,arguments)}),2e3),getDownloadLink:function(){return this.$currentEnv.API_URL+"/markdowns/"+this.markdownId+"/download"},createMarkdown:function(){var t=this;return v()(l.a.mark(function e(){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.saving=!0,e.next=4,t.$http.post(t.$currentEnv.API_URL+"/markdowns/"+t.markdownId,{content:t.content});case 4:n=e.sent,t.$router.push({name:"markdowns",params:{id:n.data._id}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.errors.push(e.t0);case 11:t.saving=!1;case 12:case"end":return e.stop()}},e,t,[[0,8]])}))()},deleteMarkdown:function(){var t=this;return v()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.saving=!0,e.next=4,t.$http.delete(t.$currentEnv.API_URL+"/markdowns/"+t.markdownId);case 4:t.$router.push({name:"markdowns"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.errors.push(e.t0);case 10:t.saving=!1,t.openAlert=!1;case 12:case"end":return e.stop()}},e,t,[[0,7]])}))()}},watch:{markdownId:function(t,e){this.firstLoad=t!==e,this.mustTriggerAutoSave=!!t},markdownContent:function(){this.content=this.markdownContent},content:function(t,e){this.markdownId&&this.mustTriggerAutoSave&&!this.firstLoad?this.triggerAutosave(t):this.firstLoad=!1,this.focusSave=!(this.mustTriggerAutoSave||"# Welcome"===t&&t||t===e)}}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("header",[t._v(t._s(t.markdownId||"new_file")+".md\n      "),n("div",{staticClass:"buttons"})]),t._v(" "),n("div",{staticClass:"editor"},[n("div",{staticClass:"alert",class:{open:t.openAlert}},[n("div",{staticClass:"text"},[t._v("\n        Are you sure?\n        "),n("div",{staticClass:"options"},[n("i",{staticClass:"fa fa-check success",on:{click:t.deleteMarkdown}}),t._v(" "),n("i",{staticClass:"fa fa-times error",on:{click:function(e){t.openAlert=!1}}})])])]),t._v(" "),n("textarea",{staticClass:"code",domProps:{value:t.content},on:{input:t.update}}),t._v(" "),n("div",{staticClass:"result",domProps:{innerHTML:t._s(t.compiledMarkdown)}})]),t._v(" "),n("footer",[n("div",{staticClass:"options"},[t.markdownId?n("i",{staticClass:"fa fa-trash 2x error",on:{click:function(e){t.openAlert=!0}}}):t._e(),t._v(" "),t.markdownId?n("a",{attrs:{href:t.getDownloadLink(),target:"_blank"}},[n("i",{staticClass:"fa fa-cloud-download"})]):t._e(),t._v(" "),t.saving?n("i",{staticClass:"fa fa-circle-o-notch fa-spin"}):t._e(),t._v(" "),t.markdownId?t._e():n("i",{staticClass:"fa fa-save",class:{lookme:t.focusSave},on:{click:function(e){t.createMarkdown()}}})])])])},staticRenderFns:[]},k={name:"Markdowns",data:function(){return{markdowns:{},selectedMarkdown:{},errors:[]}},computed:{compiledMarkdown:function(){return this.preview(this.input)}},components:{"app-editor":n("VU/8")(m,w,!1,null,null,null).exports},created:function(){var t=this;return v()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.queryData(t.$route);case 2:case"end":return e.stop()}},e,t)}))()},methods:{moment:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return moment(t).fromNow()}),getFileName:function(t){return"..."+t._id.substr(t._id.length-15)+".md"},goToMarkdown:function(t){this.$router.push({name:"markdowns",params:{id:t._id}})},createNewMarkdown:function(){this.$router.push({name:"markdowns"})},fetchData:function(){var t=this;return v()(l.a.mark(function e(){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.get(t.$currentEnv.API_URL+"/markdowns");case 3:n=e.sent,t.markdowns=n.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.errors.push(e.t0);case 10:case"end":return e.stop()}},e,t,[[0,7]])}))()},selectMarkdown:function(t){var e=this;return v()(l.a.mark(function n(){var r;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$http.get(e.$currentEnv.API_URL+"/markdowns/"+t);case 3:r=n.sent,e.selectedMarkdown=r.data,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),e.errors.push(n.t0);case 10:case"end":return n.stop()}},n,e,[[0,7]])}))()},queryData:function(t){var e=this;return v()(l.a.mark(function n(){var r;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=t.params.id)){n.next=10;break}return n.next=4,e.selectMarkdown(r);case 4:if(n.t0=e.markdowns,!n.t0){n.next=8;break}return n.next=8,e.fetchData();case 8:n.next=13;break;case 10:return e.selectedMarkdown={content:"# Welcome"},n.next=13,e.fetchData();case 13:case"end":return n.stop()}},n,e)}))()}},beforeRouteUpdate:function(t,e,n){var r=this;return v()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.queryData(t);case 2:n();case 3:case"end":return e.stop()}},e,r)}))()}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"folder"},[t._m(0),t._v(" "),n("div",{staticClass:"files-list"},[n("div",{staticClass:"file create",on:{click:t.createNewMarkdown}},[n("div",{staticClass:"file-new"},[n("i",{staticClass:"fa fa-plus"}),t._v(" "+t._s(t.selectedMarkdown._id?"New File":"Creating new file...")+"\n          ")])]),t._v(" "),t._l(t.markdowns,function(e){return n("div",{key:e._id,staticClass:"file",class:[t.selectedMarkdown._id===e._id?"active":""],on:{click:function(n){t.goToMarkdown(e)}}},[t._m(1,!0),t._v(" "),n("div",{staticClass:"file-detail"},[n("div",[n("div",{staticClass:"title"},[t._v("File name:")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.getFileName(e)))])]),t._v(" "),n("div",[n("div",{staticClass:"title"},[t._v("Last update:")]),t._v(" "),n("div",{staticClass:"value"},[t._v(t._s(t.moment(e.updatedAt)))])])])])})],2),t._v(" "),t._m(2)]),t._v(" "),n("app-editor",{attrs:{"markdown-content":t.selectedMarkdown.content,"markdown-id":t.selectedMarkdown._id},on:{reRenderList:t.fetchData}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[this._v("Markdowns"),e("div",{staticClass:"buttons"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"file-icon"},[e("i",{staticClass:"fa fa-file-o fa-3x"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("footer",[e("a",{attrs:{href:"//github.com/josediego",target:"_blank"}},[this._v("Made with ‚ù§")])])}]},x=n("VU/8")(k,g,!1,null,null,null).exports;s.a.use(u.a);var C=new u.a({routes:[{path:"/:id?",name:"markdowns",component:x}]}),M=n("mtWM"),$=n.n(M);s.a.config.productionTip=!1,s.a.prototype.$http=$.a,s.a.prototype.$currentEnv=Object({NODE_ENV:"production",API_URL:"https://ubiquitous-system.herokuapp.com"}),s.a.prototype.$delay=function(t){return new a.a(function(e){return setTimeout(e,t)})},new s.a({el:"#app",router:C,components:{App:c},template:"<App/>"})},eOSv:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8bf3a68b82aa61be88fa.js.map